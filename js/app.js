!function e(t,n,r){function i(o,a){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e){function t(){Window.Application=new r,Backbone.history.start()}var n=e("hbsfy/runtime"),r=e("./classes/routers/Application.js");n.registerHelper("formatDate",function(e){return moment(e).format("MMMM, YYYY")}),n.registerHelper("formatText",function(e){return e.replace(/(\S*)/g,"<a href='#formats/$1'>$1</a>")}),t()},{"./classes/routers/Application.js":11,"hbsfy/runtime":23}],2:[function(e,t){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return""},useData:!0})},{"hbsfy/runtime":23}],3:[function(e,t){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<h1>Komen Kaarten</h1>\n<p>kleine beschrijving tralala</p> \n<a href=\'#register\' title=\'Klik om te registeren\'>Register</a>\n<form class="login" action="" method="post" accept-charset="utf-8">\n    <input type="text" name="name" placeholder="Voornaam Achternaam" class="name-input" value=""/>\n    <input type="password" name="password" placeholder="paswoord" class="password-input" value=""/>\n    </select>\n    <input type="submit" class="submit" value="login"/>\n  </form>'},useData:!0})},{"hbsfy/runtime":23}],4:[function(e,t){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<form class="register" action="" method="post" enctype="multipart/form-data" accept-charset="utf-8">\n    <input type="text" name="name" placeholder="Voornaam Achternaam" class="name-input" value="Charlotte Vanroelen"/>\n    <input type="text" name="email" placeholder="emailadres" class="email-input" value="fetch@live.be"/>\n    <input type="password" name="password" placeholder="paswoord" class="password-input" value="1234"/>\n    <input type="file" name="photo" placeholder="photo" class="photo-input" value=""/>\n    <input type="text" name="street" placeholder="street" class="street-input" value="Resedastraat 53"/>\n    <input type="text" name="town" placeholder="8500" class="town-input" value="9000"/>\n    </select>\n    <input type="submit" class="submit" value="register"/>\n  </form>'},useData:!0})},{"hbsfy/runtime":23}],5:[function(e,t){t.exports=e(2)},{"/Applications/MAMP/htdocs/MAIV/deelexamen/_hbs/day.hbs":2,"hbsfy/runtime":23}],6:[function(e,t){var n=e("../models/Day.js"),r=Backbone.Collection.extend({model:n,url:"/MAIV/deelexamen/api/days",initialize:function(){},comparator:function(e){return-e.get("id")},sync:function(e,t,n){t.methodUrl&&t.methodUrl(e.toLowerCase())&&(n=n||{},n.url=t.methodUrl(e.toLowerCase())),Backbone.Collection.prototype.sync.apply(this,arguments)}});t.exports=r},{"../models/Day.js":8}],7:[function(e,t){var n=e("../models/User.js"),r=Backbone.Collection.extend({model:n,url:"/MAIV/deelexamen/api/users",initialize:function(){},comparator:function(e){return-e.get("id")},sync:function(e,t,n){t.methodUrl&&t.methodUrl(e.toLowerCase())&&(n=n||{},n.url=t.methodUrl(e.toLowerCase())),Backbone.Collection.prototype.sync.apply(this,arguments)}});t.exports=r},{"../models/User.js":9}],8:[function(e,t){var n=Backbone.Model.extend({urlRoot:"/MAIV/deelexamen/api/days",initialize:function(e){e&&(this.user_id=e.user_id)},methodUrl:function(e){return"read"===e&&this.user_id?void(this.urlRoot="/MAIV/deelexamen/api/days/"+this.user_id):void(this.urlRoot="/MAIV/deelexamen/api/days/")},sync:function(e,t,n){t.methodUrl&&t.methodUrl(e.toLowerCase())&&(n=n||{},n.urlRoot=t.methodUrl(e.toLowerCase())),Backbone.Collection.prototype.sync.apply(this,arguments)}});t.exports=n},{}],9:[function(e,t){var n=Backbone.Model.extend({urlRoot:"/MAIV/deelexamen/api/users/",initialize:function(e){e&&(this.email=e.email)},methodUrl:function(e){return"read"===e&&this.email?void(this.urlRoot="/MAIV/deelexamen/api/users/"+this.email):void(this.urlRoot="/MAIV/deelexamen/api/users/")},sync:function(e,t,n){t.methodUrl&&t.methodUrl(e.toLowerCase())&&(n=n||{},n.urlRoot=t.methodUrl(e.toLowerCase())),Backbone.Collection.prototype.sync.apply(this,arguments)}});t.exports=n},{}],10:[function(e,t){var n=Backbone.Model.extend({urlRoot:"/MAIV/deelexamen/api/weeks",initialize:function(e){e&&(this.register=e.register)},methodUrl:function(e){return"read"===e&&this.register?void(this.urlRoot="/MAIV/deelexamen/api/weeks/last/"):void(this.urlRoot="/MAIV/deelexamen/api/weeks/")},sync:function(e,t,n){t.methodUrl&&t.methodUrl(e.toLowerCase())&&(n=n||{},n.urlRoot=t.methodUrl(e.toLowerCase())),Backbone.Collection.prototype.sync.apply(this,arguments)}});t.exports=n},{}],11:[function(e,t){var n=e("../views/HomeView.js"),r=e("../views/WeekView.js"),i=e("../views/RegisterView.js"),s=Backbone.Router.extend({routes:{home:"home",register:"register",week:"week","*actions":"default"},empty:function(){$(".container").empty()},home:function(){this.empty(),this.home=new n,$(".container").append(this.home.render().el)},register:function(){this.empty(),this.register=new i,$(".container").append(this.register.render().el)},week:function(){this.empty(),this.week=new r,$(".container").append(this.week.render().el)},"default":function(){this.navigate("home",{trigger:!0}),console.log("hallo")}});t.exports=s},{"../views/HomeView.js":13,"../views/RegisterView.js":14,"../views/WeekView.js":15}],12:[function(e,t){var n=e("../../../_hbs/day.hbs"),r=Backbone.View.extend({template:n,tagName:"li",initialize:function(){this.listenTo(this.model,"destroy",this.remove)},render:function(){return this.$el.html(this.template(this.model.attributes)),this}});t.exports=r},{"../../../_hbs/day.hbs":2}],13:[function(e,t){var n=e("../../../_hbs/home.hbs"),r=Backbone.View.extend({template:n,events:{"click .login":"login"},initialize:function(){},login:function(e){e.preventDefault()},render:function(){return this.$el.html(this.template()),this.$users=this.$el.find(".tweets"),this}});t.exports=r},{"../../../_hbs/home.hbs":3}],14:[function(e,t){var n=e("../../../_hbs/register.hbs"),r=e("../models/User.js"),i=e("../models/Week.js"),s=e("../models/Day.js"),o=(e("../collections/UserCollection.js"),Backbone.View.extend({template:n,tagName:"div",events:{"click .submit":"addUser","change .photo-input":"previewImage"},previewImage:function(){console.log("changed");var e=this.checkFile();0!=e&&$("form").append(e)},checkFile:function(){if(this.$el.find(".photo-input")[0].files.length>0){var e=this.$el.find(".photo-input")[0].files[0];if(-1!=e.type.search("image")){var t=new FileReader,n=document.createElement("img");return t.onload=function(){var e="no error in errorString";n.onload=function(){return n.width>800||n.height>800?void(e="De afbeelding moet kleiner zijn dan 800x800"):n.width!=n.height?void(e="De afbeelding moet vierkant zijn"):void 0},n.setAttribute("src",t.result)},t.readAsDataURL(e),n}return this.errorInput(),!1}return this.errorInput(),!1},saveUser:function(){var e=new r({name:this.$el.find(".name-input").val(),email:this.$el.find(".email-input").val(),password:this.$el.find(".password-input").val(),street:this.$el.find(".street-input").val(),town:this.$el.find(".town-input").val()});e.save(),e.fetch({success:function(t,n){if(0===n.length)console.log("User doesnt exist. Error!");else{console.log("User exists. No error!");var r=e.get("id");console.log("id: "+r);var o=new i({register:!0});o.fetch({success:function(e,t){if(console.log(t),0===t.length)console.log("Week doesnt exist. Error!");else{console.log("Week exists! No Error!");for(var n=1;4>=n;n++){var a=o.get("day"+n+"_id");if(0===a){console.log("day"+n+" is empty. Filling it in.");var l=new Date(o.get("startDate"));l.setDate(l.getDate()+n),l.toDateString();var u=new s({user_id:r,week_id:o.get("id"),date:l});if(u.save(),console.log(u),u.fetch({success:function(e,t){0===t.length?console.log("Day doesnt exist. Error!"):(console.log("Day exists. No error!"),console.log(u.get("id")),o.set("day"+n+"_id",u.get("id")),console.log(o),o.save())}}),4==n){var c=new Date(o.get("startDate"));c.setDate(c.getDate()+7),c.toDateString();var p=new i({startDate:c});p.save()}break}}}}.bind(this)})}}})},createWeek:function(){},addUser:function(e){e.preventDefault(),console.log("RegisterView: addUser");var t=!1;if(""===this.$el.find("input").val()&&(this.errorInput(),t=!0),!t){var n=this.checkFile();if(0!=n){var i=new r({email:this.$el.find(".email-input").val()});i.fetch({success:function(e,t){0===t.length?(console.log("addUser: User doesnt exist. Time to create.!"),this.saveUser()):console.log("addUser: User exists! Dont create user!")}.bind(this)})}}},errorInput:function(){console.log("error"),""===this.$el.find(".name-input").val()&&this.$el.find(".name-input").addClass("error"),""===this.$el.find(".email-input").val()&&this.$el.find(".email-input").addClass("error"),""===this.$el.find(".password-input").val()&&this.$el.find(".password-input").addClass("error"),""===this.$el.find(".street-input").val()&&this.$el.find(".street-input").addClass("error"),""===this.$el.find(".town-input").val()&&this.$el.find(".town-input").addClass("error")},hideErrors:function(){console.log("hiding errors"),""===this.$el.find(".name-input").val()&&this.$el.find(".name-input").removeClass("error"),""===this.$el.find(".email-input").val()&&this.$el.find(".email-input").removeClass("error"),""===this.$el.find(".password-input").val()&&this.$el.find(".password-input").removeClass("error"),""===this.$el.find(".street-input").val()&&this.$el.find(".street-input").removeClass("error"),""===this.$el.find(".town-input").val()&&this.$el.find(".town-input").removeClass("error")},initialize:function(){this.week_id=0,this.day_id=0,this.user_id=0},render:function(){return this.$el.html(this.template()),this}}));t.exports=o},{"../../../_hbs/register.hbs":4,"../collections/UserCollection.js":7,"../models/Day.js":8,"../models/User.js":9,"../models/Week.js":10}],15:[function(e,t){var n=e("../collections/DayCollection.js"),r=e("./DayView.js"),i=e("../../../_hbs/week.hbs"),s=Backbone.View.extend({template:i,events:{},initialize:function(){this.collection=new n,this.listenTo(this.collection,"sync",this.renderDays),this.collection.fetch()},renderDays:function(){this.$days.empty(),this.collection.sort(),this.collection.forEach(this.renderDay,this)},renderDay:function(e){var t=new r({model:e});this.$days.append(t.render().el)},render:function(){return this.$el.html(this.template()),this.$days=this.$el.find(".days"),this}});t.exports=s},{"../../../_hbs/week.hbs":5,"../collections/DayCollection.js":6,"./DayView.js":12}],16:[function(e,t,n){"use strict";var r=e("./handlebars/base"),i=e("./handlebars/safe-string")["default"],s=e("./handlebars/exception")["default"],o=e("./handlebars/utils"),a=e("./handlebars/runtime"),l=function(){var e=new r.HandlebarsEnvironment;return o.extend(e,r),e.SafeString=i,e.Exception=s,e.Utils=o,e.escapeExpression=o.escapeExpression,e.VM=a,e.template=function(t){return a.template(t,e)},e},u=l();u.create=l,u["default"]=u,n["default"]=u},{"./handlebars/base":17,"./handlebars/exception":18,"./handlebars/runtime":19,"./handlebars/safe-string":20,"./handlebars/utils":21}],17:[function(e,t,n){"use strict";function r(e,t){this.helpers=e||{},this.partials=t||{},i(this)}function i(e){e.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new o("Missing helper: '"+arguments[arguments.length-1].name+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var r=n.inverse,i=n.fn;if(t===!0)return i(this);if(t===!1||null==t)return r(this);if(c(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):r(this);if(n.data&&n.ids){var o=v(n.data);o.contextPath=s.appendContextPath(n.data.contextPath,n.name),n={data:o}}return i(t,n)}),e.registerHelper("each",function(e,t){if(!t)throw new o("Must pass iterator to #each");var n,r,i=t.fn,a=t.inverse,l=0,u="";if(t.data&&t.ids&&(r=s.appendContextPath(t.data.contextPath,t.ids[0])+"."),p(e)&&(e=e.call(this)),t.data&&(n=v(t.data)),e&&"object"==typeof e)if(c(e))for(var h=e.length;h>l;l++)n&&(n.index=l,n.first=0===l,n.last=l===e.length-1,r&&(n.contextPath=r+l)),u+=i(e[l],{data:n});else for(var d in e)e.hasOwnProperty(d)&&(n&&(n.key=d,n.index=l,n.first=0===l,r&&(n.contextPath=r+d)),u+=i(e[d],{data:n}),l++);return 0===l&&(u=a(this)),u}),e.registerHelper("if",function(e,t){return p(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||s.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){p(e)&&(e=e.call(this));var n=t.fn;if(s.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var r=v(t.data);r.contextPath=s.appendContextPath(t.data.contextPath,t.ids[0]),t={data:r}}return n(e,t)}),e.registerHelper("log",function(t,n){var r=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(r,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}var s=e("./utils"),o=e("./exception")["default"],a="2.0.0";n.VERSION=a;var l=6;n.COMPILER_REVISION=l;var u={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};n.REVISION_CHANGES=u;var c=s.isArray,p=s.isFunction,h=s.toString,d="[object Object]";n.HandlebarsEnvironment=r,r.prototype={constructor:r,logger:f,log:m,registerHelper:function(e,t){if(h.call(e)===d){if(t)throw new o("Arg not supported with multiple helpers");s.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){h.call(e)===d?s.extend(this.partials,e):this.partials[e]=t},unregisterPartial:function(e){delete this.partials[e]}};var f={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(f.level<=e){var n=f.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,t)}}};n.logger=f;var m=f.log;n.log=m;var v=function(e){var t=s.extend({},e);return t._parent=e,t};n.createFrame=v},{"./exception":18,"./utils":21}],18:[function(e,t,n){"use strict";function r(e,t){var n;t&&t.firstLine&&(n=t.firstLine,e+=" - "+n+":"+t.firstColumn);for(var r=Error.prototype.constructor.call(this,e),s=0;s<i.length;s++)this[i[s]]=r[i[s]];n&&(this.lineNumber=n,this.column=t.firstColumn)}var i=["description","fileName","lineNumber","message","name","number","stack"];r.prototype=new Error,n["default"]=r},{}],19:[function(e,t,n){"use strict";function r(e){var t=e&&e[0]||1,n=p;if(t!==n){if(n>t){var r=h[n],i=h[t];throw new c("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new c("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function i(e,t){if(!t)throw new c("No environment passed to template");if(!e||!e.main)throw new c("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var n=function(n,r,i,s,o,a,l,p,h){o&&(s=u.extend({},s,o));var d=t.VM.invokePartial.call(this,n,i,s,a,l,p,h);if(null==d&&t.compile){var f={helpers:a,partials:l,data:p,depths:h};l[i]=t.compile(n,{data:void 0!==p,compat:e.compat},t),d=l[i](s,f)}if(null!=d){if(r){for(var m=d.split("\n"),v=0,g=m.length;g>v&&(m[v]||v+1!==g);v++)m[v]=r+m[v];d=m.join("\n")}return d}throw new c("The partial "+i+" could not be compiled when running in runtime-only mode")},r={lookup:function(e,t){for(var n=e.length,r=0;n>r;r++)if(e[r]&&null!=e[r][t])return e[r][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:u.escapeExpression,invokePartial:n,fn:function(t){return e[t]},programs:[],program:function(e,t,n){var r=this.programs[e],i=this.fn(e);return t||n?r=s(this,e,i,t,n):r||(r=this.programs[e]=s(this,e,i)),r},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=u.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler},i=function(t,n){n=n||{};var s=n.data;i._setup(n),!n.partial&&e.useData&&(s=l(t,s));var o;return e.useDepths&&(o=n.depths?[t].concat(n.depths):[t]),e.main.call(r,t,r.helpers,r.partials,s,o)};return i.isTop=!0,i._setup=function(n){n.partial?(r.helpers=n.helpers,r.partials=n.partials):(r.helpers=r.merge(n.helpers,t.helpers),e.usePartial&&(r.partials=r.merge(n.partials,t.partials)))},i._child=function(t,n,i){if(e.useDepths&&!i)throw new c("must pass parent depths");return s(r,t,e[t],n,i)},i}function s(e,t,n,r,i){var s=function(t,s){return s=s||{},n.call(e,t,e.helpers,e.partials,s.data||r,i&&[t].concat(i))};return s.program=t,s.depth=i?i.length:0,s}function o(e,t,n,r,i,s,o){var a={partial:!0,helpers:r,partials:i,data:s,depths:o};if(void 0===e)throw new c("The partial "+t+" could not be found");return e instanceof Function?e(n,a):void 0}function a(){return""}function l(e,t){return t&&"root"in t||(t=t?d(t):{},t.root=e),t}var u=e("./utils"),c=e("./exception")["default"],p=e("./base").COMPILER_REVISION,h=e("./base").REVISION_CHANGES,d=e("./base").createFrame;n.checkRevision=r,n.template=i,n.program=s,n.invokePartial=o,n.noop=a},{"./base":17,"./exception":18,"./utils":21}],20:[function(e,t,n){"use strict";function r(e){this.string=e}r.prototype.toString=function(){return""+this.string},n["default"]=r},{}],21:[function(e,t,n){"use strict";function r(e){return u[e]}function i(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function s(e){return e instanceof l?e.toString():null==e?"":e?(e=""+e,p.test(e)?e.replace(c,r):e):e+""}function o(e){return e||0===e?f(e)&&0===e.length?!0:!1:!0}function a(e,t){return(e?e+".":"")+t}var l=e("./safe-string")["default"],u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/[&<>"'`]/g,p=/[&<>"'`]/;n.extend=i;var h=Object.prototype.toString;n.toString=h;var d=function(e){return"function"==typeof e};d(/x/)&&(d=function(e){return"function"==typeof e&&"[object Function]"===h.call(e)});var d;n.isFunction=d;var f=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===h.call(e):!1};n.isArray=f,n.escapeExpression=s,n.isEmpty=o,n.appendContextPath=a},{"./safe-string":20}],22:[function(e,t){t.exports=e("./dist/cjs/handlebars.runtime")},{"./dist/cjs/handlebars.runtime":16}],23:[function(e,t){t.exports=e("handlebars/runtime")["default"]},{"handlebars/runtime":22}]},{},[1]);
//# sourceMappingURL=app.js.map